{"version":3,"sources":["webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue?3f1b","webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue?451e","webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue?bd35","webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue?3f38","webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue","webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue?ddd8","webpack:////Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue?ae96"],"names":["msgType","require","disp","components","props","username","type","Object","value","chatType","String","SINGLE_CHAT","data","inputMessage","userMessage","created","onReady","methods","focus","$emit","blur","isGroupChat","CHAT_ROOM","getSendToParam","groupId","your","bindMessage","e","detail","console","log","emojiAction","emoji","str","msglen","length","start","lastIndexOf","end","len","slice","sendMessage","me","prototype","trim","replace","id","$im","conn","getUniqueId","msg","message","TEXT","set","from","myName","to","roomType","success","serverMsgId","fire","fail","setGroup","send","body","uni"],"mappings":"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","file":"comps/chat/inputbar/suit/main/main.js","sourcesContent":["import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=72238b78&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('72238b78', component.options)\n    } else {\n      api.reload('72238b78', component.options)\n    }\n    module.hot.accept(\"./main.vue?vue&type=template&id=72238b78&\", function () {\n      api.rerender('72238b78', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/lixu/Desktop/github/goldRecovery/comps/chat/inputbar/suit/main/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=72238b78&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet msgType = require(\"../../../msgtype\");\nlet disp = require(\"../../../../../utils/broadcast\");\n\nexport default {\n\tcomponents: {\n\n\t},\n\tprops: {\n\t\tusername: {\n\t\t\ttype: Object,\n\t\t\tvalue: {},\n\t\t},\n\t\tchatType: {\n\t\t\ttype: String,\n\t\t\tvalue: msgType.chatType.SINGLE_CHAT,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tinputMessage: \"\", // render input 的值\n\t\t\tuserMessage: \"\", // input 的实时值\n\t\t}\n\t},\n\tcreated() {\n\n\t},\n\n\tonReady() {\n\n\t},\n\tmethods: {\n\t\tfocus() {\n\t\t\tthis.$emit('inputFocused')\n\t\t},\n\t\tblur() {\n\t\t\tthis.$emit('inputBlured')\n\t\t},\n\t\tisGroupChat() {\n\t\t\treturn this.chatType == msgType.chatType.CHAT_ROOM;\n\t\t},\n\t\tgetSendToParam() {\n\t\t\treturn this.isGroupChat() ? this.username.groupId : this.username.your;\n\t\t},\n\t\t// bindinput 不能打冒号！\n\t\tbindMessage(e) {\n\t\t\tthis.userMessage = e.detail.value\n\t\t\tconsole.log(this.userMessage)\n\t\t},\n\t\temojiAction(emoji) {\n\t\t\tvar str;\n\t\t\tvar msglen = this.userMessage.length - 1;\n\t\t\tif (emoji && emoji != \"[del]\") {\n\t\t\t\tstr = this.userMessage + emoji;\n\t\t\t} else if (emoji == \"[del]\") {\n\t\t\t\tlet start = this.userMessage.lastIndexOf(\"[\");\n\t\t\t\tlet end = this.userMessage.lastIndexOf(\"]\");\n\t\t\t\tlet len = end - start;\n\t\t\t\tif (end != -1 && end == msglen && len >= 3 && len <= 4) {\n\t\t\t\t\tstr = this.userMessage.slice(0, start);\n\t\t\t\t} else {\n\t\t\t\t\tstr = this.userMessage.slice(0, msglen);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.userMessage = str,\n\t\t\tthis.inputMessage = str\n\t\t},\n\n\t\tsendMessage() {\n\t\t\tlet me = this;\n\t\t\tString.prototype.trim = function() {\n\t\t\t\treturn this.replace(/(^\\s*)|(\\s*$)/g, '');\n\t\t\t}\n\t\t\tif (!this.userMessage.trim()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet id = this.$im.conn.getUniqueId();\n\t\t\tlet msg = new this.$im.message(msgType.TEXT, id);\n\t\t\tmsg.set({\n\t\t\t\tmsg: this.userMessage,\n\t\t\t\tfrom: this.username.myName,\n\t\t\t\tto: this.getSendToParam(),\n\t\t\t\troomType: false,\n\t\t\t\tchatType: this.chatType,\n\t\t\t\tsuccess(id, serverMsgId) {\n\t\t\t\t\tconsole.log('成功了')\n\t\t\t\t\tdisp.fire('em.chat.sendSuccess', id, me.userMessage);\n\t\t\t\t\tme.userMessage = '';\n\t\t\t\t\tme.inputMessage = '';\n\t\t\t\t\tconsole.log(me.userMessage)\n\t\t\t\t},\n\t\t\t\tfail(id, serverMsgId) {\n\t\t\t\t\tconsole.log('失败了')\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (this.chatType == msgType.chatType.CHAT_ROOM) {\n\t\t\t\tmsg.setGroup(\"groupchat\");\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tthis.$im.conn.send(msg.body);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\n\t\t\tuni.$emit('saveSendMsg', {\n\t\t\t\tmsg: msg,\n\t\t\t\ttype: msgType.TEXT,\n\t\t\t})\n\t\t\t\n\t\t\tthis.userMessage = '';\n\t\t\tthis.inputMessage = '';\n\t\t},\n\t}\n}\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}